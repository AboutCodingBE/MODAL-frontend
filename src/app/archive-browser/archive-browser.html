<div class="page">
  <!-- Header -->
  <div class="page-header">
    <div class="page-header-left">
      <h1 class="page-title">Archive Browser</h1>
      <p class="page-subtitle">Beheer en verken uw digitale collecties</p>
    </div>
    <button class="btn-primary" (click)="openModal()">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
      </svg>
      Nieuw Archief
    </button>
  </div>

  <!-- Archive cards -->
  <div class="cards-grid">
    @for (archive of archives; track archive.id) {
      <div class="card">
        <div class="card-top">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="4" width="20" height="5" rx="1"/>
            <path d="M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9"/>
            <path d="M10 13h4"/>
          </svg>
          <span class="badge" [class]="'badge--' + archive.status.toLowerCase()">
            {{ archive.status }}
          </span>
        </div>

        <div class="card-body">
          <h2 class="card-name">{{ archive.name }}</h2>
          <div class="card-meta">
            <span class="meta-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
              </svg>
              {{ archive.date }}
            </span>
            <span class="meta-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/>
                <path d="M14 2v4a2 2 0 0 0 2 2h4"/>
              </svg>
              {{ archive.fileCount }} bestanden
            </span>
          </div>
        </div>

        <div class="card-footer">
          @if (archive.status === 'ANALYSED') {
            <button class="btn-card-secondary">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="4" width="20" height="5" rx="1"/>
                <path d="M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9"/>
                <path d="M10 13h4"/>
              </svg>
              Resultaten
            </button>
          } @else {
            <button class="btn-card-primary">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="6 3 20 12 6 21 6 3"/>
              </svg>
              Analyse Starten
            </button>
          }
          <button class="btn-card-icon" title="Meer opties">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="5" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="12" cy="19" r="1"/>
            </svg>
          </button>
        </div>
      </div>
    }
  </div>
</div>

<!-- Modal overlay -->
@if (modalOpen()) {
  <div class="modal-overlay" (click)="closeModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">Nieuw Archief Toevoegen</h2>
        <button class="modal-close" (click)="closeModal()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label class="form-label" for="archiveName">NAAM VAN HET ARCHIEF</label>
          <input
            id="archiveName"
            type="text"
            class="form-input"
            placeholder="Bijv. Project_Antwerpen_2026"
            [value]="archiveName()"
            (input)="archiveName.set($any($event.target).value)"
          />
        </div>

        <div class="form-group">
          <label class="form-label" for="folderPath">LOCATIE OP SCHIJF</label>
          <div class="folder-row">
            <input
              id="folderPath"
              type="text"
              class="form-input"
              placeholder="Selecteer een map..."
              [value]="folderPath()"
              (input)="folderPath.set($any($event.target).value)"
              readonly
            />
            <button class="btn-select-folder" (click)="selectFolder()">Select Folder</button>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn-annuleren" (click)="closeModal()">Annuleren</button>
        <button class="btn-primary" (click)="ingestArchive()">Archief Ingesten</button>
      </div>
    </div>
  </div>
}
